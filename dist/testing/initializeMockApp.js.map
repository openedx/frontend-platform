{"version":3,"file":"initializeMockApp.js","names":["configure","configureAnalytics","MockAnalyticsService","configureI18n","configureLogging","MockLoggingService","configureAuth","MockAuthService","getConfig","mockMessages","initializeMockApp","_ref","arguments","length","undefined","_ref$messages","messages","_ref$authenticatedUse","authenticatedUser","loggingService","config","authService","_objectSpread","analyticsService","httpClient","getAuthenticatedHttpClient"],"sources":["../../src/testing/initializeMockApp.js"],"sourcesContent":["import { configure as configureAnalytics, MockAnalyticsService } from '../analytics';\nimport { configure as configureI18n } from '../i18n';\nimport { configure as configureLogging, MockLoggingService } from '../logging';\nimport { configure as configureAuth, MockAuthService } from '../auth';\nimport { getConfig } from '../config';\nimport mockMessages from './mockMessages';\n\n/**\n * Initializes a mock application for component testing. The mock application includes\n * mock analytics, auth, and logging services, and the real i18n service.\n *\n * See MockAnalyticsService, MockAuthService, and MockLoggingService for mock implementation\n * details. For the most part, the analytics and logging services just implement their functions\n * with jest.fn() and do nothing else, whereas the MockAuthService actually has some behavior\n * implemented, it just doesn't make any HTTP calls.\n *\n * Note that this mock application is not sufficient for testing the full application lifecycle or\n * initialization callbacks/custom handlers as described in the 'initialize' function's\n * documentation. It exists merely to set up the mock services that components themselves tend to\n * interact with most often. It could be extended to allow for setting up custom handlers fairly\n * easily, as this functionality would be more-or-less identical to what the real initialize\n * function does.\n *\n * Example:\n *\n * ```\n * import { initializeMockApp } from '@edx/frontend-platform/testing';\n * import { logInfo } from '@edx/frontend-platform/logging';\n *\n * describe('initializeMockApp', () => {\n *   it('mocks things correctly', () => {\n *     const { loggingService } = initializeMockApp();\n *     logInfo('test', {});\n *     expect(loggingService.logInfo).toHaveBeenCalledWith('test', {});\n *   });\n * });\n * ```\n *\n * @param {Object} [options]\n * @param {*} [options.messages] A i18n-compatible messages object, or an array of such objects. If\n * an array is provided, duplicate keys are resolved with the last-one-in winning.\n * @param {UserData|null} [options.authenticatedUser] A UserData object representing the\n * authenticated user. This is passed directly to MockAuthService.\n * @memberof module:Testing\n */\nexport default function initializeMockApp({\n  messages = mockMessages,\n  authenticatedUser = null,\n} = {}) {\n  const loggingService = configureLogging(MockLoggingService, {\n    config: getConfig(),\n  });\n\n  const authService = configureAuth(MockAuthService, {\n    config: { ...getConfig(), authenticatedUser },\n    loggingService,\n  });\n\n  const analyticsService = configureAnalytics(MockAnalyticsService, {\n    config: getConfig(),\n    httpClient: authService.getAuthenticatedHttpClient(),\n    loggingService,\n  });\n\n  // The i18n service configure function has no return value, since there isn't a service class.\n  configureI18n({\n    config: getConfig(),\n    loggingService,\n    messages,\n  });\n\n  return {\n    analyticsService,\n    authService,\n    loggingService,\n  };\n}\n"],"mappings":";;;;;;AAAA,SAASA,SAAS,IAAIC,kBAAkB,EAAEC,oBAAoB,QAAQ,cAAc;AACpF,SAASF,SAAS,IAAIG,aAAa,QAAQ,SAAS;AACpD,SAASH,SAAS,IAAII,gBAAgB,EAAEC,kBAAkB,QAAQ,YAAY;AAC9E,SAASL,SAAS,IAAIM,aAAa,EAAEC,eAAe,QAAQ,SAAS;AACrE,SAASC,SAAS,QAAQ,WAAW;AACrC,OAAOC,YAAY,MAAM,gBAAgB;;AAEzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,iBAAiBA,CAAA,EAGjC;EAAA,IAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAJ,CAAC,CAAC;IAAAG,aAAA,GAAAJ,IAAA,CAFJK,QAAQ;IAARA,QAAQ,GAAAD,aAAA,cAAGN,YAAY,GAAAM,aAAA;IAAAE,qBAAA,GAAAN,IAAA,CACvBO,iBAAiB;IAAjBA,iBAAiB,GAAAD,qBAAA,cAAG,IAAI,GAAAA,qBAAA;EAExB,IAAME,cAAc,GAAGf,gBAAgB,CAACC,kBAAkB,EAAE;IAC1De,MAAM,EAAEZ,SAAS,CAAC;EACpB,CAAC,CAAC;EAEF,IAAMa,WAAW,GAAGf,aAAa,CAACC,eAAe,EAAE;IACjDa,MAAM,EAAAE,aAAA,CAAAA,aAAA,KAAOd,SAAS,CAAC,CAAC;MAAEU,iBAAiB,EAAjBA;IAAiB,EAAE;IAC7CC,cAAc,EAAdA;EACF,CAAC,CAAC;EAEF,IAAMI,gBAAgB,GAAGtB,kBAAkB,CAACC,oBAAoB,EAAE;IAChEkB,MAAM,EAAEZ,SAAS,CAAC,CAAC;IACnBgB,UAAU,EAAEH,WAAW,CAACI,0BAA0B,CAAC,CAAC;IACpDN,cAAc,EAAdA;EACF,CAAC,CAAC;;EAEF;EACAhB,aAAa,CAAC;IACZiB,MAAM,EAAEZ,SAAS,CAAC,CAAC;IACnBW,cAAc,EAAdA,cAAc;IACdH,QAAQ,EAARA;EACF,CAAC,CAAC;EAEF,OAAO;IACLO,gBAAgB,EAAhBA,gBAAgB;IAChBF,WAAW,EAAXA,WAAW;IACXF,cAAc,EAAdA;EACF,CAAC;AACH","ignoreList":[]}