{"version":3,"file":"utils.js","names":["getConfig","basename","SELECTED_THEME_VARIANT_KEY","removeExistingLinks","existingLinks","forEach","link","remove","getDefaultThemeVariant","_ref","_window$matchMedia","_window","themeVariants","_ref$themeVariantDefa","themeVariantDefaults","undefined","themeVariantKeys","Object","keys","length","themeVariantKey","name","metadata","persistedSelectedParagonThemeVariant","localStorage","getItem","hasDarkSystemPreference","window","matchMedia","call","matches","defaultDarkThemeVariant","dark","darkThemeVariantMetadata","defaultLightThemeVariant","light","lightThemeVariantMetadata","fallbackThemeUrl","url","_window$location","baseUrl","BASE_URL","location","origin","concat","handleVersionSubstitution","_ref2","wildcardKeyword","localVersion","includes","replaceAll","isEmptyObject","obj"],"sources":["../../../../src/react/hooks/paragon/utils.js"],"sourcesContent":["import { getConfig } from '../../../config';\nimport { basename } from '../../../initialize';\nimport { SELECTED_THEME_VARIANT_KEY } from '../../constants';\n\n/**\n * Iterates through each given `<link>` element and removes it from the DOM.\n * @param {HTMLLinkElement[]} existingLinks\n */\nexport const removeExistingLinks = (existingLinks) => {\n  existingLinks.forEach((link) => {\n    link.remove();\n  });\n};\n\n/**\n* Finds the default theme variant from the given theme variants object. If no default theme exists, the first theme\n* variant is returned as a fallback.\n* @param {Object.<string, ParagonThemeVariant>|undefined} themeVariants\n*\n* @returns {ParagonThemeVariant|undefined} The default theme variant.\n*/\nexport const getDefaultThemeVariant = ({ themeVariants, themeVariantDefaults = {} }) => {\n  if (!themeVariants) {\n    return undefined;\n  }\n\n  const themeVariantKeys = Object.keys(themeVariants);\n\n  // Return early if there are no theme variants configured.\n  if (themeVariantKeys.length === 0) {\n    return undefined;\n  }\n  // If there is only one theme variant, return it since it's the only one that may be used.\n  if (themeVariantKeys.length === 1) {\n    const themeVariantKey = themeVariantKeys[0];\n    return {\n      name: themeVariantKey,\n      metadata: themeVariants[themeVariantKey],\n    };\n  }\n  // There's more than one theme variant configured; figured out which one to display based on\n  // the following preference rules:\n  //   1. Get theme preference from localStorage.\n  //   2. Detect user system settings.\n  //   3. Use the default theme variant as configured.\n\n  // Prioritize persisted localStorage theme variant preference.\n  const persistedSelectedParagonThemeVariant = localStorage.getItem(SELECTED_THEME_VARIANT_KEY);\n  if (persistedSelectedParagonThemeVariant && themeVariants[persistedSelectedParagonThemeVariant]) {\n    return {\n      name: persistedSelectedParagonThemeVariant,\n      metadata: themeVariants[persistedSelectedParagonThemeVariant],\n    };\n  }\n\n  // Then, detect system preference via `prefers-color-scheme` media query and use\n  // the default dark theme variant, if one exists.\n  const hasDarkSystemPreference = !!window.matchMedia?.('(prefers-color-scheme: dark)')?.matches;\n  const defaultDarkThemeVariant = themeVariantDefaults.dark;\n  const darkThemeVariantMetadata = themeVariants[defaultDarkThemeVariant];\n\n  if (hasDarkSystemPreference && defaultDarkThemeVariant && darkThemeVariantMetadata) {\n    return {\n      name: defaultDarkThemeVariant,\n      metadata: darkThemeVariantMetadata,\n    };\n  }\n\n  const defaultLightThemeVariant = themeVariantDefaults.light;\n  const lightThemeVariantMetadata = themeVariants[defaultLightThemeVariant];\n\n  // Handle edge case where the default light theme variant is not configured or provided.\n  if (!defaultLightThemeVariant || !lightThemeVariantMetadata) {\n    return undefined;\n  }\n\n  // Otherwise, fallback to using the default light theme variant as configured.\n  return {\n    name: defaultLightThemeVariant,\n    metadata: lightThemeVariantMetadata,\n  };\n};\n\n/**\n* Creates the fallback URL for the given theme file.\n* @param {string} url The theme file path.\n* @returns {string} The default theme url.\n*/\nexport const fallbackThemeUrl = (url) => {\n  const baseUrl = getConfig().BASE_URL || window.location?.origin;\n  return `${baseUrl}${basename}${url}`;\n};\n\nexport const handleVersionSubstitution = ({ url, wildcardKeyword, localVersion }) => {\n  if (!url || !url.includes(wildcardKeyword) || !localVersion) {\n    return url;\n  }\n  return url.replaceAll(wildcardKeyword, localVersion);\n};\n\nexport const isEmptyObject = (obj) => !obj || Object.keys(obj).length === 0;\n"],"mappings":"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","ignoreList":[]}