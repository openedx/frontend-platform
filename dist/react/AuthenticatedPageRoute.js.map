{"version":3,"file":"AuthenticatedPageRoute.js","names":["React","useContext","PropTypes","AppContext","PageWrap","getLoginRedirectUrl","AuthenticatedPageRoute","_ref","redirectUrl","children","_useContext","authenticatedUser","destination","global","location","href","assign","createElement","propTypes","string","node","isRequired","defaultProps"],"sources":["../../src/react/AuthenticatedPageRoute.jsx"],"sourcesContent":["import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\n\nimport AppContext from './AppContext';\nimport PageWrap from './PageWrap';\nimport { getLoginRedirectUrl } from '../auth';\n\n/**\n * A react-router route that redirects to the login page when the route becomes active and the user\n * is not authenticated.  If the application has been initialized with `requireAuthenticatedUser`\n * false, an authenticatedPageRoute can be used to protect a subset of the application's routes,\n * rather than the entire application.\n *\n * It can optionally accept an override URL to redirect to instead of the login page.\n *\n * Like a `PageWrap`, also calls `sendPageEvent` when the route becomes active.\n *\n * @see PageWrap\n * @see {@link module:frontend-platform/analytics~sendPageEvent}\n * @memberof module:React\n * @param {Object} props\n * @param {string} props.redirectUrl The URL anonymous users should be redirected to, rather than\n * viewing the route's contents.\n */\nexport default function AuthenticatedPageRoute({ redirectUrl, children }) {\n  const { authenticatedUser } = useContext(AppContext);\n  if (authenticatedUser === null) {\n    const destination = redirectUrl || getLoginRedirectUrl(global.location.href);\n    global.location.assign(destination);\n\n    return null;\n  }\n\n  return (\n    <PageWrap>\n      {children}\n    </PageWrap>\n  );\n}\n\nAuthenticatedPageRoute.propTypes = {\n  redirectUrl: PropTypes.string,\n  children: PropTypes.node.isRequired,\n};\n\nAuthenticatedPageRoute.defaultProps = {\n  redirectUrl: null,\n};\n"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,UAAU,QAAQ,OAAO;AACzC,OAAOC,SAAS,MAAM,YAAY;AAElC,OAAOC,UAAU,MAAM,cAAc;AACrC,OAAOC,QAAQ,MAAM,YAAY;AACjC,SAASC,mBAAmB,QAAQ,SAAS;;AAE7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,sBAAsBA,CAAAC,IAAA,EAA4B;EAAA,IAAzBC,WAAW,GAAAD,IAAA,CAAXC,WAAW;IAAEC,QAAQ,GAAAF,IAAA,CAARE,QAAQ;EACpE,IAAAC,WAAA,GAA8BT,UAAU,CAACE,UAAU,CAAC;IAA5CQ,iBAAiB,GAAAD,WAAA,CAAjBC,iBAAiB;EACzB,IAAIA,iBAAiB,KAAK,IAAI,EAAE;IAC9B,IAAMC,WAAW,GAAGJ,WAAW,IAAIH,mBAAmB,CAACQ,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAC;IAC5EF,MAAM,CAACC,QAAQ,CAACE,MAAM,CAACJ,WAAW,CAAC;IAEnC,OAAO,IAAI;EACb;EAEA,oBACEZ,KAAA,CAAAiB,aAAA,CAACb,QAAQ,QACNK,QACO,CAAC;AAEf;AAEAH,sBAAsB,CAACY,SAAS,GAAG;EACjCV,WAAW,EAAEN,SAAS,CAACiB,MAAM;EAC7BV,QAAQ,EAAEP,SAAS,CAACkB,IAAI,CAACC;AAC3B,CAAC;AAEDf,sBAAsB,CAACgB,YAAY,GAAG;EACpCd,WAAW,EAAE;AACf,CAAC","ignoreList":[]}